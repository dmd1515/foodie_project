<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Foodie - Chat Layout</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js" integrity="sha384-NaWTHo/8YCBYJ59830LTz/P4aQZK1sS0SneOgAvhsIl3zBu8r9RevNg5lHCHAuQ/" crossorigin="anonymous"></script>    </script>
    <style>
        /* Global Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Error message styles */
        .error-message {
            color: #dc3545; /* Raudona spalva */
            font-size: 0.9rem;
            margin-top: 5px;
            display: none; /* Paslėptas pagal nutylėjimą */
        }

        .error-message.visible {
            display: block; /* Rodyti, kai yra klaida */
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: #fff;
            margin: 10% auto;
            padding: 20px;
            border-radius: 8px;
            width: 300px;
            text-align: center;
        }

        /* File input and preview styles */
        .file-input-container {
            margin-bottom: 20px;
        }

        #image-input {
            display: none; /* Hide the default file input */
        }

        #image-preview {
            max-width: 100%;
            max-height: 150px;
            border-radius: 8px;
            margin-top: 10px;
        }

        /* Button styles */
        .button-container {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .upload-button,
        .close-modal {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            flex: 1;
        }

        .upload-button {
            background-color: #007bff; /* Blue color */
            color: #fff;
        }

        .upload-button:hover {
            background-color: #0056b3; /* Darker blue on hover */
        }

        .close-modal {
            background-color: #6c757d; /* Gray color */
            color: #fff;
        }

        .close-modal:hover {
            background-color: #5a6268; /* Darker gray on hover */
        }

        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: #000; /* Juodas fonas */
            color: #fff;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            align-items: center; /* Centruojame turinį horizontaliai */
        }

        .sidebar h1 {
            font-size: 2rem;
            margin-bottom: 20px;
            text-transform: uppercase; /* Pavadinimas didžiosiomis raidėmis */
            text-align: center; /* Centruojame tekstą */
            color: #fff; /* Baltas tekstas */
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
            width: 100%; /* Užima visą plotį */
        }

        .sidebar ul li {
            margin-bottom: 10px;
        }

        .sidebar ul li a {
            color: #fff;
            text-decoration: none;
            font-size: 1rem;
            display: block;
            padding: 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
            border: 2px solid #fff; /* Baltas apvadas */
        }

        .sidebar ul li a:hover {
            background-color: #333; /* Tamsesnis atspalvis užvedus */
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: #f4f4f4;
            padding: 20px;
            overflow-y: auto;
        }

        .chat-area {
            flex: 1;
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            overflow-y: auto;
        }

        .chat-area h2 {
            font-size: 2rem; /* Padidintas šrifto dydis */
            margin-bottom: 20px;
            text-align: center; /* Centruojame tekstą */
        }

        .chat-messages {
            margin-bottom: 20px;
        }

        .chat-messages .message {
    margin-bottom: 10px;
    padding: 10px;
    border-radius: 4px;
    background-color: #e9ecef;
    max-width: 70%;
    position: relative;
            width: fit-content;
    white-space: normal;      /* Preserves newlines and wraps */
    word-wrap: break-word;      /* Breaks long words if needed */
    overflow-wrap: anywhere;  /* Modern version */
    min-width: 0;
}

        .chat-messages .message.user {
            background-color: #007bff;
            color: #fff;
            margin-left: auto; /* Align to the right */
        }

        .chat-messages .message.bot {
            background-color: #e9ecef;
            margin-right: auto; /* Align to the left */
        }

        .chat-messages .message .edit-button {
            position: absolute;
            top: 5px;
            right: 5px;
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .chat-messages .message.user .edit-button {
            color: #fff;
        }

        .chat-messages .message.bot .edit-button {
            color: #000;
        }
      .chat-messages .message {
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 4px;
        background-color: #e9ecef;
      }

        .chat-input-container {
            display: flex;
            gap: 10px;
            align-items: center;
            background-color: #fff;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .chat-input-container textarea {
            flex: 1;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
            resize: none;
            font-size: 1rem;
        }

        .chat-input-container button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            background-color: #007bff;
            color: #fff;
            cursor: pointer;
            font-size: 1rem;
        }

        .chat-input-container button:hover {
            background-color: #0056b3;
        }

        .chat-input-container .photo-buttons {
            display: flex;
            gap: 10px;
        }

        .chat-input-container .photo-buttons button {
            background-color: #28a745;
        }

        .chat-input-container .photo-buttons button:hover {
            background-color: #218838;
        }

        .char-counter {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        .clear-chat-button {
            margin-top: 10px;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            background-color: #dc3545;
            color: #fff;
            cursor: pointer;
            font-size: 1rem;
        }

        .clear-chat-button:hover {
            background-color: #c82333;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
            }

            .sidebar h1 {
                font-size: 1.5rem;
            }

            .sidebar ul li a {
                font-size: 0.9rem;
            }

            .chat-area h2 {
                font-size: 1.5rem; /* Mažesnis šrifto dydis mažesniuose ekranuose */
            }

            .chat-input-container textarea {
                font-size: 0.9rem;
            }

            .chat-input-container button {
                padding: 8px 16px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .sidebar {
                width: 150px;
            }

            .sidebar h1 {
                font-size: 1.2rem;
            }

            .sidebar ul li a {
                font-size: 0.8rem;
            }

            .chat-area h2 {
                font-size: 1.2rem; /* Dar mažesnis šrifto dydis labai mažuose ekranuose */
            }

            .chat-input-container textarea {
                font-size: 0.8rem;
            }

            .chat-input-container button {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            .message.user img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 4px;
            margin-top: 5px;
            display: block;
            }

            .message.user {
                white-space: normal;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <h1>FOODIE</h1>
        <ul>
            <li><a href="http://127.0.0.1:8000/">Home</a></li>
            <li><a href="#">Recipes</a></li>
            <li><a href="">TOP Recipes</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="chat-area">
            <h2>Chat with Foodie</h2> <!-- Pakeistas tekstas ir stilius -->
            <div class="chat-messages" id="chat-messages">
                <!-- Example messages -->
                <div class="message bot" id="initial-message-1">Generating...</div>
            </div>
        </div>

    </div>
    <script type="module" >
            import { GoogleGenerativeAI } from "https://cdn.skypack.dev/@google/generative-ai";
            console.log("GoogleGenerativeAI loaded:", GoogleGenerativeAI);
        // JavaScript for handling button clicks

        document.addEventListener("DOMContentLoaded", 
            createTOPRecipes
        );

        async function createTOPRecipes() {
            document.getElementById("initial-message-1").innerText = await sendPrompt(createPrompt());
        }

        function createPrompt() {
            let prompt = "Generate 5 seasonal recipes that are the most popular right now. Your recipes must include the name of the dish, cooking time, ingredients and instructions. Your reply text should only consist of the recipes and nothing more.";
            return prompt;
        }

        async function sendPrompt(userPrompt){
            const genAI = new GoogleGenerativeAI(atob("QUl6YVN5QWM3S2ZGYlF6RG5LajVwQ1FlcWpoWWFMLXd4WEliLXRR"));
            const model = genAI.getGenerativeModel({ model: "gemini-2.5-flash" });
            const prompt = userPrompt;
            
            const result = await model.generateContent(prompt);
            console.log(result.response.text());
            return result.response.text();
      }
    </script>
</body>
</html>